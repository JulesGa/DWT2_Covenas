from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
import time

# Configura Selenium
driver = webdriver.Chrome()  # Asegúrate de tener el driver de Chrome instalado
driver.get("https://opm-digemid.minsa.gob.pe/#/consulta-producto")

# Espera que la página cargue
time.sleep(5)

# Realiza una búsqueda iterativa (por ejemplo, con letras A-Z)
resultados = []
for letra in "ABCDEFGHIJKLMNOPQRSTUVWXYZ":
    try:
        # Encuentra el cuadro de búsqueda
        search_box = driver.find_element(By.ID, "id_busqueda")  # Cambia según el selector correcto
        search_box.clear()
        search_box.send_keys(letra)
        search_box.send_keys(Keys.RETURN)
        
        # Espera los resultados
        time.sleep(3)

        # Captura los resultados
        productos = driver.find_elements(By.CLASS_NAME, "nombre_producto")  # Cambia según el selector correcto
        for producto in productos:
            resultados.append(producto.text)

    except Exception as e:
        print(f"Error al buscar con {letra}: {e}")
        
# Cierra el navegador
driver.quit()

# Muestra los resultados
print(resultados)