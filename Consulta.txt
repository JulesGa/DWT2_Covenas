import requests
import json

def obtener_datos_productos(lista_productos):
    url = "https://opm-digemid.minsa.gob.pe/api/consulta"  # Cambia a la URL de la API real

    datos_completos = []
    for producto in lista_productos:
        parametros = {"nombre_producto": producto}  # Ajusta los parámetros según la API
        respuesta = requests.get(url, params=parametros)
        
        if respuesta.status_code == 200:
            datos_completos.append(respuesta.json())
        else:
            print(f"Error con el producto: {producto}")
    
    # Guardar datos en archivo
    with open("productos.json", "w") as archivo:
        json.dump(datos_completos, archivo)
    print("Datos guardados exitosamente.")

# Lista de productos a consultar
productos = ["producto1", "producto2", "producto3"]
obtener_datos_productos(productos)
